---
import Layout from '../../layouts/Layout.astro';
import PostLayout from '../../layouts/PostLayout.astro';

const { slug } = Astro.params;

let res = await fetch(
  `https://contentmedia.dev/wp-json/wp/v2/posts?slug==${slug}&_embed`
);
let [post] = await res.json();

let data = await fetch('https://contentmedia.dev/wp-json/wp/v2/posts');
let posts = await data.json();
---

<PostLayout
  title={post.title.rendered}
  image={post._embedded['wp:featuredmedia'][0].source_url}
>
  <Fragment set:html={post.content.rendered} />
</PostLayout>
